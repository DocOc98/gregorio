%GregorioTeX file.
%
% Copyright (C) 2007-2015 The Gregorio Project (see CONTRIBUTORS.md)
%
% This file is part of Gregorio.
%
% Gregorio is free software: you can redistribute it and/or modify
% it under the terms of the GNU General Public License as published by
% the Free Software Foundation, either version 3 of the License, or
% (at your option) any later version.
%
% Gregorio is distributed in the hope that it will be useful,
% but WITHOUT ANY WARRANTY; without even the implied warranty of
% MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
% GNU General Public License for more details.
%
% You should have received a copy of the GNU General Public License
% along with Gregorio.  If not, see <http://www.gnu.org/licenses/>.

\gre@declarefileversion{gregoriotex-chars.tex}{3.0.2}% GREGORIO_VERSION

% bars
\def\gre@char@divisiomaior{\GreCPDivisioMaior}%
\def\gre@char@virgula{\GreCPVirgula}%
\def\gre@char@divisiominima{\GreCPDivisioMinima}%
\def\gre@char@divisiominor{\GreCPDivisioMinor}%
\def\gre@char@divisiodominican{\GreCPDivisioDominican}%
\def\gre@char@divisiodominicanalt{\GreCPDivisioDominicanAlt}%

\def\gre@char@punctumcavum{\GreCPPunctumCavum}%
\def\gre@char@lineapunctumcavum{\GreCPLineaPunctumCavum}%
\def\gre@char@punctumcavumhole{\GreCPPunctumCavumHole}%
\def\gre@char@lineapunctumcavumhole{\GreCPLineaPunctumCavumHole}%

% notes (to compute different widths)
\def\gre@char@smallpunctum{\GreCPPunctumDeminutus}%
\def\gre@char@punctum{\GreCPPunctum}%
\def\gre@char@punctuminclinatum{\GreCPPunctumInclinatum}%
\def\gre@char@stropha{\GreCPStropha}%
\def\gre@char@strophaaucta{\GreCPStrophaAucta}%
\def\gre@char@quilisma{\GreCPQuilisma}%
\def\gre@char@quilisma@line@tr{\GreCPQuilismaLineTR}%
\def\gre@char@oriscus{\GreCPOriscus}%
\def\gre@char@oriscus@line@tr{\GreCPOriscusLineTR}%
\def\gre@char@oriscusauctus{\GreCPOriscusReversus}%
\def\gre@char@punctuminclinatumdem{\GreCPPunctumInclinatumAuctus}%
\def\gre@char@lineapunctum{\GreCPLineaPunctum}%
\def\gre@char@peshigh{\GreCPPunctumSmall}%
\def\gre@char@virga{\GreCPVirga}%
\def\gre@char@virgaaucta{\GreCPVirgaReversaDescendens}%
\def\gre@char@punctum@line@br{\GreCPPunctumLineBR}%
\def\gre@char@punctum@line@tr{\GreCPPunctumLineTR}%
\def\gre@char@punctum@line@tl{\GreCPPunctumLineTL}%
\def\gre@char@punctum@line@bl{\GreCPPunctumLineBL}%
\def\gre@char@punctum@line@blbr{\GreCPPunctumLineBLBR}%
\def\gre@char@punctumauctus@line@bl{\GreCPPunctumAuctusLineBL}%
\def\gre@char@salicus@oriscus{\GreCPSalicusOriscus}%
\def\gre@char@pesinitauctus{\GreCPPesQuadratumTwoInitioDebilisDescendens}%
\def\gre@char@pesinitauctusone{\GreCPPesQuadratumOneInitioDebilisDescendens}%
\def\gre@char@flexus{\GreCPPesQuadratumLongqueueThreeNothing}%
\def\gre@char@flexusone{\GreCPPesQuadratumLongqueueOneNothing}%
\def\gre@char@flexusdeminutus{\GreCPFlexusTwoDeminutus}%
\def\gre@char@flexusaltone{\GreCPFlexusNobarOneNothing}%
\def\gre@char@flexusalt{\GreCPFlexusNobarTwoNothing}%
\def\gre@char@flexusaltone@line@bl{\GreCPFlexusAmOneLineBL}%
\def\gre@char@flexusalt@line@bl{\GreCPFlexusLineBL}%
\def\gre@char@pesquassus{\GreCPPesQuassusLongqueueThreeNothing}%
\def\gre@char@pesquassusone{\GreCPPesQuassusLongqueueOneNothing}%
\def\gre@char@virga@line@br{\GreCPVirgaLineBR}%
\def\gre@char@torculus{\GreCPTorculusOneTwoNothing}%
\def\gre@char@torculusdeminutus{\GreCPTorculusTwoTwoDeminutus}%
\def\gre@char@porrectus@one{\GreCPPorrectusOneTwoNothing}%
\def\gre@char@porrectus@two{\GreCPPorrectusTwoTwoNothing}%
\def\gre@char@porrectus@three{\GreCPPorrectusThreeTwoNothing}%
\def\gre@char@porrectus@four{\GreCPPorrectusFourTwoNothing}%
\def\gre@char@porrectus@five{\GreCPPorrectusFiveTwoNothing}%
\def\gre@char@porrectus@amone@one{\GreCPPorrectusOneOneNothing}%
\def\gre@char@porrectus@amone@two{\GreCPPorrectusTwoOneNothing}%
\def\gre@char@porrectus@amone@three{\GreCPPorrectusThreeOneNothing}%
\def\gre@char@porrectus@amone@four{\GreCPPorrectusFourOneNothing}%
\def\gre@char@porrectus@amone@five{\GreCPPorrectusFiveOneNothing}%
\def\gre@char@leading@debilis{\GreCPLeadingPunctumOneInitioDebilis}%
\def\gre@char@leading@punctum@one{\GreCPLeadingPunctumOne}%
\def\gre@char@leading@quilisma@one{\GreCPLeadingQuilismaOne}%
\def\gre@char@leading@oriscus@one{\GreCPLeadingOriscusOne}%
\def\gre@char@leading@punctum@two{\GreCPLeadingPunctumTwo}%
\def\gre@char@leading@quilisma@two{\GreCPLeadingQuilismaTwo}%
\def\gre@char@leading@oriscus@two{\GreCPLeadingOriscusTwo}%
\def\gre@char@fuse@punctum@one{\GreFuseTwo{\GreCPLeadingPunctumOne}{\GreCPPunctum}}%
\def\gre@char@fuse@quilisma@one{\GreFuseTwo{\GreCPLeadingQuilismaOne}{\GreCPPunctum}}%
\def\gre@char@fuse@oriscus@one{\GreFuseTwo{\GreCPLeadingOriscusOne}{\GreCPPunctum}}%
\def\gre@char@fuse@punctum@two{\GreFuseTwo{\GreCPLeadingPunctumTwo}{\GreCPPunctum}}%
\def\gre@char@fuse@quilisma@two{\GreFuseTwo{\GreCPLeadingQuilismaTwo}{\GreCPPunctum}}%
\def\gre@char@fuse@oriscus@two{\GreFuseTwo{\GreCPLeadingOriscusTwo}{\GreCPPunctum}}%
\def\gre@char@fuse@debilis{\GreFuseTwo{\GreCPLeadingPunctumOneInitioDebilis}{\GreCPPunctum}}%

% signs
\def\gre@char@curlybrace{\GreCPCurlyBrace}%
\def\gre@char@barbrace{\GreCPBarBrace}%
\def\gre@char@brace{\GreCPRoundBrace}%
\def\gre@char@bracedown{\GreCPRoundBraceDown}%
\def\gre@char@linea{\GreCPLinea}%
\def\gre@char@vepisemus{\GreCPVEpisemus}%
\def\gre@char@accentus{\GreCPAccentus}%
\def\gre@char@semicirculus{\GreCPSemicirculus}%
\def\gre@char@circulus{\GreCPCirculus}%
\def\gre@char@reversedaccentus{\GreCPAccentusReversus}%
\def\gre@char@reversedsemicirculus{\GreCPSemicirculusReversus}%

% horizontal episemus
\newbox\gre@box@hep%
\def\gre@def@char@he#1#2{%
  \expandafter\def\csname gre@char@he@#1\endcsname##1{%
    \ifx##1f\csname GreCPHEpisemus#2\endcsname%
    \else%
      \setbox\gre@box@hep\hbox{\csname GreCPHEpisemus#2\endcsname}%
      \hbox to \wd\gre@box@hep{%
        \ifx##1l\else\hfil\fi%
        \csname GreCPHEpisemus#2Reduced\endcsname%
        \ifx##1r\else\hfil\fi%
      }%
    \fi%
  }%
}%
\def\gre@def@char@he@porr#1#2{
  \expandafter\def\csname gre@char@he@#1\endcsname##1##2{%
    \ifcase##1\gre@char@he@punctum{##2}%
    \or\csname GreCPHEpisemus#2One\endcsname%
    \or\csname GreCPHEpisemus#2Two\endcsname%
    \or\csname GreCPHEpisemus#2Three\endcsname%
    \or\csname GreCPHEpisemus#2Four\endcsname%
    \or\csname GreCPHEpisemus#2Five\endcsname%
    \fi%
  }%
}%
\gre@def@char@he{punctum}{Punctum}%
\gre@def@char@he{punctum@line@br}{PunctumLineBR}%
\gre@def@char@he{punctum@line@tr}{PunctumLineTR}%
\gre@def@char@he{punctum@line@tl}{PunctumLineTL}%
\gre@def@char@he{punctum@line@bl}{PunctumLineBL}%
\gre@def@char@he{punctum@line@blbr}{PunctumLineBLBR}%
\gre@def@char@he{punctumauctus@line@bl}{PunctumAuctusLineBL}%
\gre@def@char@he{salicus@oriscus}{SalicusOriscus}%
\gre@def@char@he{flexus}{FlexusDeminutus}%
\gre@def@char@he{initio}{Debilis}%
\gre@def@char@he{virga}{Virga}%
\gre@def@char@he{virga@line@br}{VirgaLineBR}%
\gre@def@char@he{inclinatum}{Inclinatum}%
\gre@def@char@he{inclinatumdem}{InclinatumDeminutus}%
\gre@def@char@he{stropha}{Stropha}%
\gre@def@char@he@porr{porrectus}{Porrectus}%
\gre@def@char@he@porr{porrectus@amone}{PorrectusAmOne}%
\gre@def@char@he@porr{porrectusfl}{PorrectusFlexus}%
\gre@def@char@he{quilisma}{Quilisma}%
\gre@def@char@he{quilisma@line@tr}{QuilismaLineTR}%
\gre@def@char@he{oriscus}{Oriscus}%
\gre@def@char@he{oriscus@line@tr}{OriscusLineTR}%
\gre@def@char@he{smallpunctum}{HighPes}% "smallpunctum" is the top punctum in a pes

\def\greflatchar{\gregoriofont\GreCPFlat}%
\def\greflatholechar{\gregoriofont\GreCPFlatHole}%
\def\grenaturalchar{\gregoriofont\GreCPNatural}%
\def\grenaturalholechar{\gregoriofont\GreCPNaturalHole}%
\def\gresharpchar{\gregoriofont\GreCPSharp}%
\def\gresharpholechar{\gregoriofont\GreCPSharpHole}%
\def\grecclefchar{\gregoriofont\GreCPCClef}%
\def\grefclefchar{\gregoriofont\GreCPFClef}%
\def\greincclefchar{\gregoriofont\GreCPCClefChange}%
\def\greinfclefchar{\gregoriofont\GreCPFClefChange}%
\def\grepunctummorachar{\gregoriofont\GreCPAuctumMora}%
\def\greverticalepisemuschar{\gregoriofont\GreCPVEpisemus}%
\def\grecustotoplongchar{\gregoriofont\GreCPCustosUpLong}%
\def\grecustotopshortchar{\gregoriofont\GreCPCustosUpShort}%
\def\grecustotopmiddlechar{\gregoriofont\GreCPCustosUpMedium}%
\def\grecustobottomlongchar{\gregoriofont\GreCPCustosDownLong}%
\def\grecustobottomshortchar{\gregoriofont\GreCPCustosDownShort}%
\def\grecustobottommiddlechar{\gregoriofont\GreCPCustosDownMedium}%
\def\greabovebarbracechar{\gregoriofont\GreCPBarBrace}%
\def\grepunctumchar{\gregoriofont\GreCPPunctum}%

%%%%%%%%%%%%%%%%%
% macros for the different styles%
%%%%%%%%%%%%%%%%%

\def\gresetglyphstyle#1{%
  \IfStrEq{#1}{default}%
    {%
      \greresetglyph{Flat}%
      \greresetglyph{FlatHole}%
      \greresetglyph{Natural}%
      \greresetglyph{NaturalHole}%
      \greresetglyph{Sharp}%
      \greresetglyph{SharpHole}%
      \greresetglyph{CClef}%
      \greresetglyph{FClef}%
      \greresetglyph{CClefChange}%
      \greresetglyph{FClefChange}%
      \greresetglyph{AuctumMora}%
      \greresetglyph{VEpisemus}%
      \greresetglyph{CustosUpLong}%
      \greresetglyph{CustosUpShort}%
      \greresetglyph{CustosUpMedium}%
      \greresetglyph{CustosDownLong}%
      \greresetglyph{CustosDownShort}%
      \greresetglyph{CustosDownMedium}%
      \greresetglyph{BarBrace}%
      \greresetglyph{Punctum}%
      \relax %
    }%
    {\IfStrEq{#1}{medicaea}%
      {%
        \gresetglyphstyle{defualt}\greusestylecommon %
        \grechangeglyph{CustosUpLong}{greextra}{MedicaeaCustosUpLong}%
        \grechangeglyph{CustosUpShort}{greextra}{MedicaeaCustosUpShort}%
        \grechangeglyph{CustosUpMedium}{greextra}{MedicaeaCustosUpMedium}%
        \grechangeglyph{CustosDownLong}{greextra}{MedicaeaCustosDownLong}%
        \grechangeglyph{CustosDownShort}{greextra}{MedicaeaCustosDownShort}%
        \grechangeglyph{CustosDownMedium}{greextra}{MedicaeaCustosDownMedium}%
        \grechangeglyph{CClef}{greextra}{MedicaeaCClef}%
        \grechangeglyph{FClef}{greextra}{MedicaeaFClef}%
        \grechangeglyph{CClefChange}{greextra}{MedicaeaCClefChange}%
        \grechangeglyph{FClefChange}{greextra}{MedicaeaFClefChange}%
        \grechangeglyph{Flat}{greextra}{MedicaeaFlat}%
        \grechangeglyph{FlatHole}{greextra}{MedicaeaFlatHole}%
        \relax %
      }%
      {\IfStrEq{#1}{hufnagel}%
        {%
          \gresetglyphstyle{default}\greusestylecommon %
          \grechangeglyph{CustosUpLong}{greextra}{HufnagelCustosUpLong}%
          \grechangeglyph{CustosUpShort}{greextra}{HufnagelCustosUpShort}%
          \grechangeglyph{CustosUpMedium}{greextra}{HufnagelCustosUpMedium}%
          \grechangeglyph{CustosDownLong}{greextra}{HufnagelCustosDownLong}%
          \grechangeglyph{CustosDownShort}{greextra}{HufnagelCustosDownShort}%
          \grechangeglyph{CustosDownMedium}{greextra}{HufnagelCustosDownMedium}%
          \grechangeglyph{CClef}{greextra}{HufnagelCClef}%
          \grechangeglyph{FClef}{greextra}{HufnagelFClef}%
          \grechangeglyph{CClefChange}{greextra}{HufnagelCClefChange}%
          \grechangeglyph{FClefChange}{greextra}{HufnagelFClefChange}%
          \grechangeglyph{Flat}{greextra}{HufnagelFlat}%
          \grechangeglyph{FlatHole}{greextra}{HufnagelFlatHole}%
          \relax %
        }%
        {\IfStrEq{#1}{mensural}%
          {%
            \gresetglyphstyle{default}\greusestylecommon %
            \grechangeglyph{CustosUpLong}{greextra}{MensuralCustosUpLong}%
            \grechangeglyph{CustosUpShort}{greextra}{MensuralCustosUpShort}%
            \grechangeglyph{CustosUpMedium}{greextra}{MensuralCustosUpMedium}%
            \grechangeglyph{CustosDownLong}{greextra}{MensuralCustosDownLong}%
            \grechangeglyph{CustosDownShort}{greextra}{MensuralCustosDownShort}%
            \grechangeglyph{CustosDownMedium}{greextra}{MensuralCustosDownMedium}%
            \grechangeglyph{Flat}{greextra}{MensuralFlat}%
            \grechangeglyph{FlatHole}{greextra}{MensuralFlatHole}%
            \relax %
          }%
          {\greerror{Unrecognized option for \protect\gresetglyphstyle}}%
        }%
      }%
    }%
%

\def\greusedefaultstyle{%
  \gre@deprecated{\protect\greusedefaultstyle}{\protect\gresetglyphstyle{default}}%
  \gresetglyphstyle{default}
}%

\def\greusemedicaeastyle{%
  \gre@deprecated{\protect\greusemedicaeastyle}{\protect\gresetglyphstyle{medicaea}}%
  \gresetglyphstyle{medicaea}
}%

\def\greusehufnagelstyle{%
  \gre@deprecated{\protect\greusehufnagelstyle}{\protect\gresetglyphstyle{hufnagel}}%
  \gresetglyphstyle{hufnagel}
}%

\def\greusemensuralstyle{%
  \gre@deprecated{\protect\greusemensuralstyle}{\protect\gresetglyphstyle{mensural}}%
  \gresetglyphstyle{mensural}
}%
