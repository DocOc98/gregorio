% !TEX root = GregorioRef.tex
% !TEX program = LuaLaTeX+se
\section{Gregorio\TeX{} Controls}

These functions are the ones used by Gregorio\TeX{} internally as it
process the commands listed above.  They should not appear in any user
document and are listed here for programmer documentation purposes
only.

\macroname{\textbackslash gre@error}{\#1}{gregoriotex.sty \textup{and} gregoriotex.tex}
Prints an error to the \TeX\ output log.

\begin{argtable}
  \#1 & string & error message\\
\end{argtable}


\macroname{\textbackslash gre@warning}{\#1}{gregoriotex.sty \textup{and} gregoriotex.tex}
Prints a warning to the \TeX\ output log.

\begin{argtable}
  \#1 & string & warning message\\
\end{argtable}

\macroname{\textbackslash gre@metapost}{\#1}{gregoriotex.sty \textup{and} gregoriotex.tex}
Executes \MP{} commands using luamplib.

\begin{argtable}
  \#1 & \MP{} commands & The \MP{} commands to execute.
\end{argtable}

\macroname{\textbackslash gre@deprecated}{\#1\#2}{gregoriotex-main.tex}
Macro that handles deprecation messages. By default, deprecated macros
are allowed and a warning is printed. If the package option
\texttt{deprecated=false} is set, then deprecated macros raise a
package error, halting \TeX.

\begin{argtable}
  \#1 & string & name of the deprecated macro\\
  \#2 & string & name of the correct macro to use\\
\end{argtable}

\macroname{\textbackslash gre@loadgregoriofont}{}{gregoriotex-main.tex}
Loads the chosen font for the neumes at the correct size.

\macroname{\textbackslash gre@calculate@constantglyphraise}{}{gregoriotex-spaces.tex}
Macro to caluclate \verb=\gre@constantglyphraise=

\macroname{\textbackslash gre@addtranslationspace}{}{gregoriotex-spaces.tex}
Macro to tell Gregorio to set space for the translation.

\macroname{\textbackslash gre@removetranslationspace}{}{gregoriotexspaces.tex}
Macro to tell Gregorio to remove the space allocated to the translation.

\macroname{\textbackslash gre@calculate@additionalspaces}{\#1\#2\#3\#4}{gregoriotex-spaces.tex}
Macro which calculates \verb=\gre@additionalbottomspace= and\\
\verb=\gre@additionaltopspace=

\begin{argtable}
  \#1 & integer & the height number of the top pitch, including signs\\
  \#2 & integer & the height number of the bottom pitch, including signs\\
  \#3 & 0 & there is no translation line\\
      & 1 & there is a translation line\\
  \#4 & 0 & there is no above lines text\\
      & 1 & there is above lines text
 \end{argtable}

\macroname{\textbackslash gre@calculate@textaligncenter}{\#1\#2\#3}{gregoriotex-spaces.tex}
Macro for calculating \verb=\gre@textaligncenter=.

\begin{argtable}
  \#1 & string & The first part of the syllable (any preceding consonants in Latin).\\
  \#2 & string & The middle part of the syllable (the vowel in Latin, the whole syllable in English).\\
  \#3 & 0 & Calculation is being performed for the current syllable.\\
      & 1 & Calculation is being performed for the next syllable.\\
\end{argtable}

\macroname{\textbackslash gre@calculate@aboveinitialraise}{}{gregoriotex-main.tex}
Macro to give \verb=\gre@aboveinitialfirstraise= and\\
\verb=\gre@aboveinitialsecondraise= their working values.

\macroname{\textbackslash gre@calculate@textlower}{}{gregoriotex-spaces.tex}
Calculates the default value of \texttt{textlower}.  Default is \texttt{spacebeneathtext}.

\macroname{\textbackslash gre@calculate@linewidth}{}{gregoriotex-spaces.tex}
Calculates the default line width.  Default is the width of the printable space (\verb=\hsize=).

\macroname{\textbackslash gre@calculate@stafflinewidth}{}{gregoriotex-spaces.tex}
Calculates the default width of the staff lines.  Default is \texttt{linewidth}.

\macroname{\textbackslash gre@calculate@stafflineheight}{}{gregoriotex-spaces.tex}
Calculates the height (thickness) of the staff lines.  Dependent on \texttt{stafflineheightfactor} and \texttt{gre@factor}.

\macroname{\textbackslash gre@calculate@interstafflinespace}{}{gregoriotex-spaces.tex}
Calculates the distance between the staff lines.  Dependent on \texttt{stafflineheight} and \texttt{gre@factor}

\macroname{\textbackslash gre@calculate@stafflinediff}{}{gregoriotex-spaces.tex}
Calculates a correction factor for when the staff lines are not their default thickness.  Dependent on \texttt{stafflineheight} and \texttt{gre@factor}.

\macroname{\textbackslash gre@calculate@staffheight}{}{gregoriotex-spaces.tex}
Calculates the total height of the staff.  Dependent on \texttt{stafflineheight} and \texttt{interstafflinespace}.

\macroname{\textbackslash gre@calculate@constantglyphraise}{}{gregoriotex-spaces.tex}
Calculates the baseline correction for the glyphs.  Dependent on \texttt{gre@factor}, \texttt{additionalbottomspace}, \texttt{spacebeneathtext}, \texttt{spacelinestext}, \texttt{interstafflinespace}, \texttt{stafflineheight}, \texttt{currenttranslationheight}, and \texttt{stafflinediff}.

\macroname{\textbackslash gre@computespaces}{}{gregoriotex-spaces.tex}
Aggregates all of the global distance calculations and calls them in the order needed to respect dependencies.

\macroname{\textbackslash gre@calculate@glyphraisevalue}{\#1\#2}{gregoriotex-spaces.tex}
Calculates the raise values for a glyph (glyphraisevalue and addedraisevalue) based on where it is to be placed and what kind of a glyph it is.  This is a time of use calculation.

\begin{argtable}
  \#1 & integer & The number for where the glyph is located.  \texttt{a} in gabc is 1, \texttt{b} is 2, \etc\\
  \#2 & 0 & no modification\\
  & 1 & puts the value on the interline just above if it is on a line\\
  & 2 & puts the value on the interline just beneath if it is on a line\\
  & 3 & case of the vertical episemus, which is not placed at the same place if the corresponding note is on a line or not\\
  & 4 & case of the punctum mora, for the same reason\\
  & 5 & case of the horizontal episemus under a note, that must be placed a bit lower if the note is on a line\\
  & 6 & case of the signs above (accentus, \etc)\\
  & 8 & case of the punctum mora of the first note of a podatus or the 2nd note of a porrectus, \etc\\
  & 9 & case of the horizontal episemus, that must be placed a bit lower if the note is on a line\\
  & 10 & case of the low choral sign\\
  & 11 & case of the high choral sign\\
  & 12 & case of the low choral sign which is lower than the note\\
  & 13 & case of the brace above the bars
\end{argtable}

\macroname{\textbackslash gre@stafflinefactor}{}{gregoriotex-spaces.tex}
A number indicating the thickness of the staff lines.

\macroname{\textbackslash gre@scale@stafflinefactor}{}{gregoriotex-spaces.tex}
Flag indicating whether the stafflinefactor should scale with changes of grefactor (1), or not (0).

\macroname{\textbackslash gre@calculate@textaligncenter}{\#1\#2\#3}{gregoriotex-spaces.tex}
Macro to calculate the distance from the beginning of the text of a syllable to its alignment point (the center of the vowel for Latin centering, the center of the syllable for English centering).  This is a time of use calculation.

\begin{argtable}
  \#1 & string & the first part of the syllable\\
  \#2 & string & the middle part of the syllable\\
  \#3 & 0 & perform this calculation for the current syllable\\
  & 1 & perform this calculation for the next syllable
\end{argtable}

\macroname{\textbackslash gre@calculate@enddifference}{\#1\#2\#3\#4\#5}{gregoriotex-spaces.tex}
Calculates the difference between the end of the notes and the end of the syllable text.  Also stores the value for the previous syllable if needed.  This is a time of use calculation.

\begin{argtable}
  \#1 & length & the total width of the notes\\
  \#2 & length & the total width of the syllable text\\
  \#3 & length & the alignment distance for the text (\texttt{textaligncenter})\\
  \#4 & length & the alignment distance for the notes (\texttt{notesaligncenter})\\
  \#5 & 0 & do not save the value for the previous syllable before calculating the new value\\
  & 1 & save the value for the previous syllable before calculating the new value
\end{argtable}

\macroname{\textbackslash gre@changeonedimenfactor}{\#1\#2\#3}{gregoriotex-spaces.tex}
Change the scale of a single distance from one factor to another.

\begin{argtable}
  \#1 & string & name of the distance to be scaled.  See \nameref{distances}.\\
  \#2 & integer & the factor the distance is currently in\\
  \#3 & integer & the factor the distance is to be put into\\
\end{argtable}

\macroname{\textbackslash gre@changedimenfactor}{\#1\#2}{gregoriotex-spaces.tex}
Rescales all the distances (and stafflinefactor) which are supposed to scale with a change in factor.

\begin{argtable}
  \#1 & integer & the factor the distance is currently in\\
  \#2 & integer & the factor the distance is to be put into\\
\end{argtable}

\macroname{\textbackslash gre@calculate@nextbegindifference}{\#1\#2\#3\#4}{gregoriotex-spaces.tex}
Macro to calculate \texttt{nextbegindifference}.

\begin{argtable}
  \#1 & string & the first letters of the next syllable\\
  \#2 & string & the middle letters of the next syllable (the vowel in Latin, the whole syllable in English)\\
  \#3 & string & the end letters of the next syllable\\
  \#4 & $0 <$ integer $< 19$ & the type of notes alignment.  See \nameref{notesalign}.\\
  & $20 <$ integer $< 39$ & Same as below 20 except there is a flat before the notes.  Subtract 20 to get the type of notes alignment.\\
  & $40 <$ integer $< 59$ & Same as below 20 except there is a natural before the notes.  Subtract 40 to get the type of notes alignment.
\end{argtable}

\macroname{\textbackslash gre@tempdimcount}{}{gregoriotex-spaces.tex}
Temporary count used in calculations.

\macroname{\textbackslash gre@makein}{\#1}{gregoriotex-spaces.tex}
Strips the decimals and units from a distance.

\begin{argtable}
  \#1 & distance & should be in the form ``[0-9]+.[0-9]+pt''. (\ie the result of applying \verb=\the= to a distance register)
\end{argtable}

\macroname{\textbackslash gre@makenum}{\#1}{gregoriotex-spaces.tex}
Strips the units from a distance. 

\begin{argtable}
  \#1 & distance & should be in the form ``[0-9]+.[0-9]+pt''. (\ie the result of applying \verb=\the= to a distance register)
\end{argtable}

\macroname{\textbackslash gre@unitfactor}{}{gregoriotex-spaces.tex}
Temporary count used by \verb=\gre@convertto=.

\macroname{\textbackslash gre@basefactor}{}{gregoriotex-spaces.tex}
Temporary count used by \verb=\gre@convertto=.

\macroname{\textbackslash gre@temp@count@one}{}{gregoriotex-spaces.tex}
Temporary count used by \verb=\gre@convertto=.

\macroname{\textbackslash gre@convertto}{\#1\#2}{gregoriotex-spaces.tex}
Macro which converts a distance into a particular set of units.  Result is placed in \verb=\gre@converted= as a string.

\begin{argtable}
  \#1 & string & two letter abbreviation for the units.  Should recognize all legal TeX units.\\
  \#2 & distance & Distance to be converted.
\end{argtable}

\macroname{\textbackslash gre@converted}{}{gregoriotex-spaces.tex}
Macro holding result of last call to \verb=\gre@convertto=.

\macroname{\textbackslash gre@consistentunits}{\#1\#2}{gregoriotex-spaces.tex}
This function takes a distance and formats it as a string so that its units conform to the pattern set by a string representation of a distance.  Result is placed in \verb=\gre@stringdist=.

\begin{argtable}
  \#1 & string & the standard whose format is to be matched.\\
  \#2 & distance & the distance to be adjusted.
\end{argtable}

\macroname{\textbackslash gre@stringdist}{}{gregoriotex-spaces.tex}
Macro holding result of last call to \verb=\gre@consistentunits=.

\macroname{\textbackslash gre@temp@count@two}{}{gregoriotex-spaces.tex}
Temporary count used by \verb=\gre@changedimenfactor=.

\macroname{\textbackslash gre@includescore}{\#1}{gregoriotex-main.tex}
Macro that handles \verb=\includescore= calls when they do not have an
optional argument.

\begin{argtable}
  \#1 & string & Relative or absolute path to the score.\\
\end{argtable}

\macroname{\textbackslash gre@includescorewithoption}{[\#1]\#2}{gregoriotex-main.tex}
Macro that handles \verb=\includescore= calls when they have an optional
argument.

\begin{argtable}
  \#1 & \texttt{n} & Optional. \#2 will be included as is. \\
      & \texttt{a} & Optional. Gregoriotex will automatically compile gabc files if necessary.\\
      & \texttt{f} & Optional. Forces gregoriotex to compile the gabc file.\\
  \#2 & string & Relative or absolute path to the score.\\
\end{argtable}

\macroname{\textbackslash gre@writemode}{\#1}{gregoriotex-main.tex}
Macro that writes its argument with \verb=\greannotation=. The
argument typically is given to this macro by \verb=\GreMode= in the
gtex file.

\begin{argtable}
  \#1 & string & Text to place above the initial of a score.\\
\end{argtable}

\macroname{\textbackslash gre@brace@common}{\#1\#2\#3\#4\#5\#6\#7}{gregoriotex-signs.tex}
Common macro used internally to render braces.

\begin{argtable}
  \#1 & length  & The width of the brace.\\
  \#2 & length  & A vertical shift.\\
  \#3 & length  & A horizontal shift.\\
  \#4 & 0       & Don't shift before starting the brace.\\
      & 1       & Shift back a punctum's width before starting the brace.\\
  \#5 & 0       & No accentus above the brace.\\
      & 1       & Typeset an accentus above the brace.\\
  \#6 & integer & The height number for the brace.\\
  \#7 & csname  & The control sequence name representing the brace.
\end{argtable}

\macroname{\textbackslash grebracemetapostpreamble}{\#1}{gregoriotex-signs.tex}
Returns the \MP{} preamble for braces.  The control sequence name does
not have the \texttt{@} symbol because this macro is used within \MP{}.

\begin{argtable}
  \#1 & string & the width of the brace; if \texttt{*}, use the bar brace width.
\end{argtable}

\macroname{\textbackslash gre@draw@curlybrace}{\#1}{gregoriotex-signs.tex}
Draws a curly over-brace using \MP{}.

\begin{argtable}
  \#1 & length & the width of the brace.
\end{argtable}

\macroname{\textbackslash gre@draw@brace}{\#1}{gregoriotex-signs.tex}
Draws a round over-brace using \MP{}.

\begin{argtable}
  \#1 & string & the width of the brace; if \texttt{*}, use the bar brace width.
\end{argtable}

\macroname{\textbackslash gre@draw@underbrace}{\#1}{gregoriotex-signs.tex}
Draws a round under-brace using \MP{}.

\begin{argtable}
  \#1 & length & the width of the brace.
\end{argtable}

\macroname{\textbackslash gre@draw@roundbrace}{\#1}{gregoriotex-signs.tex}
Draws a round over- or under-brace using \MP{}.

\begin{argtable}
  \#1 & length         & the width of the brace.\\
  \#2 & number         & the height of the bounding box in em-relative units.\\
  \#3 & \MP{} commands & \MP{} commands to draw the brace outline.
\end{argtable}

\macroname{\textbackslash gre@iflatex}{\#1}{gregoriotex.sty \textup{and} gregoriotex.tex}
Evaluates to \verb=#1= if running under \LaTeX{}.

\begin{argtable}
  \#1 & \TeX{} code & the \TeX{} code to use if running under \LaTeX{}.
\end{argtable}

\macroname{\textbackslash gre@latex@barredsymbol}{\#1\#2\#3\#4}{gregoriotex-signs.tex}
Internal method used by \verb=\grelatexsimpledefarredsymbol= to simplify
the cascading of conditionals used to implement that macro.

\bigskip\textbf{Only available in \LaTeX.}

\begin{argtable}
  \#1 & string      & the value of \verb=\f@series/\f@shape= to match.\\
  \#2 & \TeX{} code & the \TeX{} for the base symbol (\ie, \texttt{A}, \texttt{R}, or \texttt{V}).\\
  \#3 & string      & the control sequence name created by \verb=\gredefsizedsymbol= to use for the bar.\\
  \#4 & dimension   & the amount to shift the bar to the left from the end of the base symbol.
\end{argtable}

\macroname{\textbackslash gre@char@cavum}{\#1\#2\#3\#4\#5\#6\#7\#8}{gregoriotex-signs.tex}
Macro to typeset a "cavum" character.

\begin{argtable}
  \#1 & length  & Argument \#2 from \verb=\GreGlyph=. Height to raise the glyph.\\
  \#2 & length  & Argument \#3 from \verb=\GreGlyph=. Height of the next note.\\
  \#3 & integer & Argument \#4 from \verb=\GreGlyph=. The type of glyph.\\
  \#4 & \TeX\ code    & Macros executed before the punctum cavum is written.\\
  \#5 & character & Argument \#5 from \verb=\GreGlyph=. The signs to typeset before the glyph.\\
  \#6 & string & the line, byte offset, and column address for textedit links when point-and-click is enabled.\\
  \#7 & control sequence & The control sequence for the glyph.\\
  \#8 & control sequence & The control sequence for the hole glyph.
\end{argtable}

\macroname{\textbackslash gre@additionalbottomcustolineend}{}{gregoriotex-signs.tex}
Macro to place a bottom custo with an additional line (positions \texttt{a} and \texttt{b}) at the end of a line.

\macroname{\textbackslash gre@additionalbottomcustolinemiddle}{}{gregoriotex-signs.tex}
Macro to place a bottom custo with an additional line (positions \texttt{a} and \texttt{b}) in the middle of a line.

\macroname{\textbackslash gre@additionaltopcustolineend}{}{gregoriotex-signs.tex}
Macro to place a top custo with an additional line (positions \texttt{l} and \texttt{m}) at the end of a line.

\macroname{\textbackslash gre@additionaltopcustolinemiddle}{}{gregoriotex-signs.tex}
Macro to place a top custo with an additional line (positions \texttt{l} and \texttt{m}) in the middle of a line.

\macroname{\textbackslash gre@pickcusto}{\#1}{gregoriotex-signs.tex}
Macro to pick the appropriate custo character.

\begin{argtable}
  \#1 & integer & height of the custo character to be placed\\
\end{argtable}

\macroname{\textbackslash gre@addspaceabove}{}{gregoriotex-main.tex}
Macro to increase the space above the lines to account for above lines text.

\macroname{\textbackslash gre@removespaceabove}{}{gregoriotex-main.tex}
Macro to decrease the space above the lines as there is no longer any above lines text.

\macroname{\textbackslash gre@alteration}{\#1\#2\#3\#4}{gregoriotex-signs.tex}
Macro to typeset an alteration.

\begin{argtable}
  \#1 & integer & height of the alteration\\
  \#2 & character alias & the alteration\\
  \#3 & character alias & the hole of the alteration\\
  \#4 & 1 & the alteration is a flat for a key change\\
  & 0 & all other cases\\
\end{argtable}

\macroname{\textbackslash gre@calculate@clefnum}{\#1\#2}{gregoriotex-signs.tex}
Macro calculating the \verb=\gre@clefnum= from the letter and number.

\begin{argtable}
  \#1 & charcter & type of clef (\texttt{c} or \texttt{f})\\
  \#2 & integer & line number\\
\end{argtable}

\macroname{\textbackslash gre@clefnum}{}{gregoriotex-signs.tex}
Count holding the current clef number.

\macroname{\textbackslash gre@clefflat}{}{gregoriotex-signs.tex}
Macro to hold the height of the current flat for the clef (\texttt{a} if no flat).

\macroname{\textbackslash gre@updatelinesclef}{}{gregoriotex-signs.tex}
Macro redrawing a key from \verb=\gre@clefnum=, useful for vertical space changes.

\macroname{\textbackslash gre@currenttextabovelines}{}{gregoriotex-main.tex}
Macro for storing the text which needs to be placed above the lines.

\macroname{\textbackslash gre@typesettextabovelines}{\#1}{gregoriotex-main.tex}
Macro for typesetting the text above the lines.

\macroname{\textbackslash gre@dotranslationcenterend}{}{gregoriotex-main.tex}
Macro to typeset a centered translation.

\macroname{\textbackslash gre@drawfirstlines}{}{gregoriotex-main.tex}
Macro to draw the first set of lines in a score (when shortened by an initial).

\macroname{\textbackslash gre@generatelines}{}{gregoriotex-main.tex}
Macro to (re)populate the box containing the lines.

\macroname{\textbackslash gre@updatelinewidth}{}{gregoriotex-main.tex}
Macro to shorten the lines to account for the presence of the initial.

\macroname{\textbackslash gre@knownline}{}{gregoriotex-main.tex}
A count which keeps track of which line of the score we're on.

\macroname{\textbackslash gre@lastoflinecount}{}{gregoriotex-main.tex}
Count to track where on the line we are.  Values are 0 (we are not near the end of a line), 1 (we're at the last syllable of the line), and 2 (we just set the last syllable of the line and so are at the first syllable of a new line).

\macroname{\textbackslash gre@savedlastoflinecount}{}{gregoriotex-main.tex}
A spot to save the \verb=\gre@lastoflinecount= so we can change it temporarily and revert to the saved value later.

\macroname{\textbackslash gre@newlinecommon}{\#1}{gregoriotex-main.tex}
The macro which needs to be called each time a new lines is started.

\begin{argtable}
  \#1 & 0 & Justifying the line being ended\\
  & 1 & Do not justify the line being ended\\
\end{argtable}

\macroname{\textbackslash gre@endafterbar}{\#1}{gregoriotex-main.tex}
Macro to call after ending a bar.

\begin{argtable}
  \#1 & 0 & We are at the end of a line\\
  & 1 & We not at the end of a line\\
\end{argtable}

\macroname{\textbackslash gre@endofsyllable}{\#1\#2\#3}{gregoriotex-syllable.tex}
Macro called at end of a syllable, adds a penalty and a space.

\begin{argtable}
  \#1 & 0 & to only add the penalty\\
  & 1 & otherwise\\
  \#2 & 0 & if end of syllable\\
  & 1 & if end of word\\
  \#3 & 1 & if next syllable is a bar\\
  & 0 & otherwise\\
\end{argtable}

\macroname{\textbackslash gre@exhyphencharsave}{}{gregoriotex-main.tex}
Macro for saving the ex hyphen character so that it can be restored at the end of the score.

\macroname{\textbackslash gre@factor}{}{gregoriotex-main.tex}
Count which stores the current staff size.

Default: 17 (approximately the size found in graduals)

\macroname{\textbackslash gre@fillhole}{\#1}{gregoriotex-signs.tex}
Macro to fill the hole in a glyph so that staff lines do not show through a hole in it.

\begin{argtable}
  \#1 & Gregorio\TeX\ char & character to use to fill the hole\\
\end{argtable}

\macroname{\textbackslash gre@calculate@notesaligncenter}{\#1}{gregoriotex-syllable.tex}
Macro to find the alignment center for a group of notes.  The value is the distance from the left edge of the group to the alignment point and is stored in \verb=\gre@dimen@notesaligncenter=.

\begin{argtable}
  \#1 & Note alignment type & See \ref{notesalign}\\
\end{argtable}

\macroname{\textbackslash gre@calculate@nextnotesaligncenter}{\#1}{gregoriotex-syllable.tex}
Same as previous, but for the next syllable.

\begin{argtable}
  \#1 & Note alignment type & See \ref{notesalign}\\
\end{argtable}

\macroname{\textbackslash gre@calculate@simplenotesaligncenter}{\#1\#2}{gregoriotex-syllable.tex}
Workhorse function behind \verb=\gre@calculate@notesaligncenter= and \verb=\gre@calculate@nextnotesaligncenter=.

\begin{argtable}
  \#1 & Note alignment type & See \ref{notesalign}\\
  \#2 & 0 & this is for the current syllable\\
  & 1 & this is for the next syllable\\
\end{argtable}

\macroname{\textbackslash gre@gregoriofontname}{}{gregoriotex-main.tex}
Macro which stores the name of the currently selected font for the neumes.

\macroname{\textbackslash gre@handleclivisspecialalignment}{\#1\#2\#3}{gregoriotex-syllable.tex}
Macro for aligning clivis syllables according to the flag \verb=\gre@clivisalignment=.

\begin{argtable}
  \#1 & Gregorio\TeX\ glyph & Glyph to use when aligning clivis on its center\\
  \#2 & Gregorio\TeX\ glyph & Glyph to use when aligning clivis on the center of the first punctum\\
  \#3 &  0 & this is for the current syllable\\
  & 1 & this is for the next syllable\\
\end{argtable}

\macroname{\textbackslash gre@hepisorline}{\#1\#2\#3\#4\#5}{gregoriotex-signs.tex}
Macro to typeset a horizontal line (either an additional staff line or an episemus).

\begin{argtable}
  \#1 & character & The letter of the height of the episemus (not the height of the note it corresponds to).\\
  \#2 & 0 & go back to the beginning of the previous glyph; this starts the         episemus at the beginning of the previous glyph\\
  & 1 & stay at the end of the glyph; doesn't make much sense to use this\\
  & 2 & go back the width of \#1; this starts the episemus at the glyph from the end that starts at \#1's width from the end\\
  & 3 & go back to the beginning of the previous glyph and then forward the width of \#1; this starts the episemus at the glyph from the start that starts just after \#1's width from the start\\
  \#3 & integer &the ambitus for a two note episemus at the diagonal stroke of a porrectus, porrectus flexus, orculus resupinus, or torculus resupinus flexus\\
  \#4 & 0 & an horizontal episemus\\
  & 1 & an horizontal episemus under a note\\
  & 3 & a line at the bottom\\
  & 2 & a line at the top\\
  \#5 & f & a normal episemus\\
  & l & a small episemus aligned left\\
  & c & a small episemus aligned center\\
  & r & for a small episemus aligned right\\
\end{argtable}

\macroname{\textbackslash gre@hepisorlineaux}{\#1\#2\#3\#4}{gregoriotex-signs.tex}
Macro that will help in the typesetting of a horizontal episemus and additional lines.

\begin{argtable}
  \#1 & Gregorio\TeX\ glyph & an offset glyph (see \#3, below)\\
  \#2 & Gregorio\TeX\ glyph & the episemus glyph\\
  \#3 & 0 & go back to the beginning of the previous glyph; this starts the  episemus at the beginning of the previous glyph\\
  & 1 & stay at the end of the glyph; doesn't make much sense to use this\\
  & 2 & go back the width of \#1; this starts the episemus at the glyph from the end that starts at \#1's width from the end\\
  & 3 & go back to the beginning of the previous glyph and then forward the width of \#1; this starts the episemus at the glyph from the start that starts just after \#1's width from the start\\
  \#4 & 0 & an horizontal episemus\\
  & 1 & an horizontal episemus under a note\\
  & 3 & a line at the bottom\\
  & 2 & a line at the top\\
\end{argtable}

\macroname{\textbackslash gre@vepisemusorrare}{\#1\#2\#3\#4\#5}{gregoriotex-signs.tex}
Macro to typeset a vertical episemus or a rare accent (like accentus, circulus, etc.).  This function must be called after a call to \verb=\GreGlyph=.

\begin{argtable}
  \#1 & character & the letter of the height of the episemus (not the height of the note it corresponds to.\\
  \#2 & integer & See \nameref{EpisemusSpecial}\\
  \#3 & Gregorio\TeX\ glyph & the sign glyph\\
  \#4 & 1 & vertical episemus\\
  & 2 & rare sign\\
  & 3 & choral sign\\
  & 4 & brace above the bar\\
  \#5 & string & the choral sign, if relevant\\
\end{argtable}

\macroname{\textbackslash gre@vepisemusorrareaux}{\#1\#2\#3\#4\#5\#6\#7}{gregoriotex-signs.tex}
Macro to help typesetting vertical episemus.

\begin{argtable}
  \#1 & Gregorio\TeX\ glyph & is an offset glyph (see \#3 below)\\
  \#2 & Gregorio\TeX glyph & the glyph upon which the sign is to be centered\\
  \#3 & 0 & go back to the beginning of the previous glyph and then forward half the width of \#2; this puts the sign at the beginning of the previous glyph, whose first note is the size of \#2\\
  & 1 & go back half the width of \#2; this puts the sign at the end of the previous glyph, whose last note is the size of \#2\\
  & 2 & go back the width of \#1 and then forward half the width of \#2; this puts the sign at the glyph from the end that starts at \#1's width from the end\\
  & 3 & go back to the beginning of the previous glyph and then forward the width of \#1 and then back half the width of \#2; this puts the sign at the glyph from the start that ends at \#1's width from the start\\
  \#4 & dimension & a shift that we want to get applied, useful for punctum inclinatum for example\\
  \#5 & integer & is the glyph number\\
  \#6 & 1 & vertical episemus\\
  & 2 & rare sign\\
  & 3 & choral sign\\
  & 4 & brace above the bar\\
  \#7 & string & the choral sign if relevant\\
\end{argtable}

\macroname{\textbackslash gre@newglyphcommon}{}{gregoriotex-syllable.tex}
Macro called before each glyph.

\macroname{\textbackslash ger@normalinitial}{}{gregoriotex-main.tex}
Macro called at the end of the score to ensure that a big initial setting doesn't carry into the next score.


\subsection{Auxiliary File}
Gregorio\TeX\ creates it's own auxiliary file (extension \texttt{gaux}) which it uses to store information between successive typesetting runs.  This allows for such features as the dynamic interline spacing.  The following functions are used to interact with that auxiliary file.

\macroname{\textbackslash gre@gaux}{}{gregoriotex-main.tex}
The handle for the auxiliary file.

\macroname{\textbackslash gre@open@gaux}{}{gregoriotex-main.tex}
Macro for opening the auxiliary file.

\macroname{\textbackslash gre@close@gaux}{}{gregoriotex-main.tex}
Macro for closing the auxiliary file.

\macroname{\textbackslash gre@write@gaux}{\#1}{gregoriotex-main.tex}
Macro for writing the auxiliary file.

\begin{argtable}
  \#1 & string & contents to be written to the auxiliary file\\
\end{argtable}



\subsection{Character Reference Aliases}
To make referencing and changing them easier, Gregorio\TeX\ stores the current font and control point for certain characters using the following macros.

\macroname{\textbackslash gre@fontchar@abovebarbrace}{}{gregoriotex-chars.tex}
The above bar brace.

\macroname{\textbackslash gre@fontchar@flat}{}{gregoriotex-chars.tex}
The flat character.

\macroname{\textbackslash gre@fontchar@flathole}{}{gregoriotex-chars.tex}
The flat hole character (\ie, the character needed to prevent lines from showing through the center of the flat).

\macroname{\textbackslash gre@fontchar@natural}{}{gregoriotex-chars.tex}
The natural character.

\macroname{\textbackslash gre@fontchar@naturalhole}{}{gregoriotex-chars.tex}
The natural hole character (\ie, the character needed to prevent lines from showing through the center of the natural).

\macroname{\textbackslash gre@fontchar@sharp}{}{gregoriotex-chars.tex}
The sharp character.

\macroname{\textbackslash gre@fontchar@sharphole}{}{gregoriotex-chars.tex}
The sharp hole character (\ie, the character needed to prevent lines from showing through the center of the sharp).

\macroname{\textbackslash gre@fontchar@punctumcavum}{}{gregoriotex-signs.tex}
The punctum cavum character.

\macroname{\textbackslash gre@fontchar@punctumcavumhole}{}{gregoriotex-signs.tex}
The punctum cavum hole character (\ie, the character needed to prevent lines from showing through the center of the punctum cavum).

\macroname{\textbackslash gre@fontchar@incclef}{}{gregoriotex-chars.tex}
The \texttt{c}-clef which appears in the middle of a line.

\macroname{\textbackslash gre@fontchar@infclef}{}{gregoriotex-chars.tex}
The \texttt{f}-clef which appears in the middle of a line.

\macroname{\textbackslash gre@fontchar@cclef}{}{gregoriotex-chars.tex}
The \texttt{c}-clef which appears at the beginning of a line.

\macroname{\textbackslash gre@fontchar@fclef}{}{gregoriotex-chars.tex}
The \texttt{f}-clef which appears at the beginning of a line.

\macroname{\textbackslash gre@fontchar@punctum}{}{gregoriotex-chars.tex}
The punctum character.

\macroname{\textbackslash gre@fontchar@punctummora}{}{gregoriotex-chars.tex}
The punctum mora character.

\macroname{\textbackslash gre@fontchar@underbrace}{}{gregoriotex-signs.tex}
The under brace character.

\macroname{\textbackslash gre@fontchar@verticalepisemus}{}{gregoriotex-chars.tex}
The vertical episemus character.

\macroname{\textbackslash gre@fontchar@brace}{}{gregoriotex-signs.tex}
The (rounded) brace character.

\macroname{\textbackslash gre@fontchar@curlybrace}{}{gregoriotex-signs.tex}
The curly brace character.

\macroname{\textbackslash gre@fontchar@custobottomlong}{}{gregoriotex-chars.tex}
The custo character with a long upwards directed vigra.

\macroname{\textbackslash gre@fontchar@custobottommiddle}{}{gregoriotex-chars.tex}
The custo character with a middle upwards directed vigra.

\macroname{\textbackslash gre@fontchar@custobottomshort}{}{gregoriotex-chars.tex}
The custo character with a short upwards directed vigra.

\macroname{\textbackslash gre@fontchar@custotoplong}{}{gregoriotex-chars.tex}
The custo character with a long downwards directed vigra.

\macroname{\textbackslash gre@fontchar@custotopmiddle}{}{gregoriotex-chars.tex}
The custo character with a middle downwards directed vigra.

\macroname{\textbackslash gre@fontchar@custotopshort}{}{gregoriotex-chars.tex}
The custo character with a short downwards directed vigra.

\macroname{\textbackslash gre@fontchar@divisiofinalis}{}{gregoriotex-signs.tex}
The divisio finalis.

\macroname{\textbackslash gre@fontchar@divisiomaior}{}{gregoriotex-signs.tex}
The divisio maior.

\macroname{\textbackslash gre@char@normalhyphen}{}{gregoriotex-main.tex}
A normal hyphen in the text font.

\subsection{Flags}

Flags are either boolean (defined with \verb=\newif=), Lua\TeX\ attributes, or counts (defined with \verb=\newcount=).  They store settings and/or the current state of something so that Gregorio\TeX\ can typeset things in the desired manner.

All distances in \nameref{distances} have a flag associated with them, of the form \verb=\gre@scale@*=.  This flag
indicates if the distance should scale when the staff size changes (1)
or not (0).

\macroname{\textbackslash ifgre@checklength}{}{gregoriotex-spaces.tex}
Boolean used in \verb=\gresetdim= to indicate if we are attempting to set a rubber length.

\macroname{\textbackslash ifgre@rubber}{}{gregoriotex-spaces.tex}
Boolean used in \verb=\gre@changeonedimenfactor= to indicate if we are dealing with one of the distances which can accept a rubber length.

\macroname{\textbackslash ifgre@stretch}{}{gregoriotex-spaces.tex}
Boolean used in \verb=\gre@changeonedimenfactor= as we test for the presence of a stretch.

\macroname{\textbackslash ifgre@shrink}{}{gregoriotex-spaces.tex}
Boolean used in \verb=\gre@changeonedimenfactor= as we test for the presence of a shrink.

\macroname{\textbackslash ifgre@vowelcentering}{}{gregoriotex-syllable.tex}
Boolean used to specify whether the center of the vowel or the center of the syllable is used to align the lyrics with their neumes.

\macroname{\textbackslash ifgre@translationcentering}{}{gregoriotex-main.tex}
Boolean used to specify whether the translation text should be centered below its respective syllable.

\macroname{\textbackslash ifgre@removelines}{}{gregoriotex-main.tex}
Boolean used to specify whether the staff lines should be removed from the score output.

\macroname{\textbackslash ifgre@hidepclines}{}{gregoriotex-signs.tex}
Boolean used to specify whether the staff lines behind a punctum cavum should be hidden.

\macroname{\textbackslash ifgre@hidealtlines}{}{gregoriotex-signs.tex}
Boolean used to specify whether the staff lines behind an alteration should be hidden.

\macroname{\textbackslash ifgre@hepisemusbridge}{}{gregoriotex-signs.tex}
Boolean used to specify whether adjacent horizontal episema should be joined together.

\macroname{\textbackslash ifgre@drawbraces}{}{gregoriotex-signs.tex}
Boolean used to specify whether braces should be drawn by \MP{} as
opposed to rendered via the score font.

\macroname{\textbackslash gre@biginitial}{}{gregoriotex-main.tex}
Count to track whether the initial is big (2-lines) or normal (1-line).

\macroname{\textbackslash ifgre@boxing}{}{gregoriotex-syllable.tex}
Boolean to track whether we're placing the contents of syllable notes into their box or actually printing that box (helps prevent spurious spaces from occurring when the box is being filled but not printed).

\macroname{\textbackslash ifgre@mustdotranslationcenterend}{}{gregoriotex-main.tex}
Boolean to track whether we must do translation centering.

\macroname{\textbackslash ifgre@endofscore}{}{gregoriotex-syllable.tex}
Boolean to mark the last syllable of the score.

\macroname{\textbackslash ifgre@firstglyph}{}{gregoriotex-syllable.tex}
Boolean that tells us if the current glyph is the first glyph or not.

\macroname{\textbackslash gre@attr@dash}{}{gregoriotex-main.tex}
A Lua\TeX\ attribute which indicates whether a syllable takes a dash if it ends a line.  

\macroname{\textbackslash gre@attr@center}{}{gregoriotex-main.tex}
A Lua\TeX\ attribute which indicates the type of translation centering.

\macroname{\textbackslash gre@attr@glyph@id}{}{gregoriotex-main.tex}
A Lua\TeX\ attribute which identifies the glyph we are at.  Used for dynamic line spacing.

\macroname{\textbackslash gre@attr@glyph@top}{}{gregoriotex-main.tex}
A Lua\TeX\ attribute which identifies the high point of the glyph.  Used for dynamic line spacing.

\macroname{\textbackslash gre@attr@glyph@bottom}{}{gregoriotex-main.tex}
A Lua\TeX\ attribute which identifies the low point of the glyph.  Used for dynamic line spacing.

\macroname{\textbackslash gre@clivisalignment}{}{gregoriotex-syllable.tex}
Count to indicate how the clivis is to be aligned with its respective syllable text.  Values: 0) always align clivis on its center; 1) align clivis on first punctum; 2) align clivis on its center, except if notes would go left of text or consonants after vowels are larger than \verb=\gre@dimen@clivisalignmentmin=.

\macroname{\textbackslash gre@insidediscretionary}{}{gregoriotex-signs.tex}
Macro which indicates whether we are currently inside a discretionary (1) or not (0).  Cannot be converted to a \TeX\ boolean because it's value needs to be passed to Lua.

\macroname{\textbackslash gre@isonaline}{}{gregoriotex-syllable.tex}
Boolean which indicates whether the current note is on a line or not (used to adjust the height of some symbols so they won't print on a line).

\macroname{\textbackslash ifgre@lastispunctum}{}{gregoriotex-syllable.tex}
Boolean which indicates if the most recent note was a punctum mora.

\macroname{\textbackslash ifgre@lastispunctumsave}{}{gregoriotex-signs.tex}
Boolean for storing \verb=\ifgre@lastispunctum= so that it can be restored later.

\macroname{\textbackslash gre@nlbstate}{}{gregoriotex-main.tex}
Macro which indicates if we are in a no line break area due to translation centering (1), an explicit no line break designation in the gabc (2), or not at all (0).

\macroname{\textbackslash gre@nlbinitialstate}{}{gregoriotex-main.tex}
Macro to store \verb=\gre@nlbstate= as we initialize or end a no line break area so that we can manipulate said flag as part of the process.


\subsection{Boxes}

Boxes are used to store elements of the score before they are printed for the purposes of reusing them and/or measuring them in order to determine their appropriate placement.

\macroname{\textbackslash gre@box@hep}{}{gregoriotex-chars.tex}
Box for horizontal episemi.

\macroname{\textbackslash gre@temp@width}{}{gregoriotex-main.tex}
Box for holding an element in order to determine its width.

\macroname{\textbackslash gre@box@initial}{}{gregoriotex-main.tex}
Box which holds the initial of the score.

\macroname{\textbackslash gre@box@firstaboveinitial}{}{gregoriotex-main.tex}
Box holding the first (top) annotation above the initial.

\macroname{\textbackslash gre@box@secondaboveinitial}{}{gregoriotex-main.tex}
Box holding the second (bottom) annotation above the initial.

\macroname{\textbackslash gre@box@lines}{}{gregoriotex-main.tex}
Box holding the staff lines.

\macroname{\textbackslash gre@box@temp@sign}{}{gregoriotex-signs.tex}
Box to hold a sign so we can measure it for placement.

\macroname{\textbackslash gre@box@syllablenotes}{}{gregoriotex-syllable.tex}
Box holding the notes associated with a syllable.

\macroname{\textbackslash gre@box@syllabletext}{}{gregoriotex-syllable.tex}
Box holding the text associated with a syllable.



\subsection{Distances}
All of the distances listed in \nameref{distances} have an internal
associated with them, of the form of \verb=\gre@*=, which stores the value of the distance (in
string representation).

These additional distances are calculated by Gregorio based on the values for the user customizable distances and what may be going on in the score at the time of their use.

\macroname{\textbackslash gre@clefwidth}{}{gregoriotex-spaces.tex}
Width of the clef.

\macroname{\textbackslash gre@tempdimsignwidth}{}{gregoriotex-spaces.tex}
Temporary dimension used to calculate placement of signs.

\macroname{gre@tempdimtwo}{}{gregoriotex-spaces.tex}
A temporary dimension used in calculations.

\macroname{\textbackslash gre@constantglyphraise}{}{gregoriotex-spaces.tex}
Dimension representing the space between the 0 of the gregorian fonts and the effective 0 of the TeX score.

\macroname{\textbackslash gre@currenttranslationheight}{}{gregoriotex-spaces.tex}
Dimension representing the space for the translation beneath the text.

\macroname{\textbackslash gre@stafflinewidth}{}{gregoriotex-spaces.tex}
Dimension representing the width of a line of staff.  Can vary, for
example, at the first line.

\macroname{\textbackslash gre@linewidth}{}{gregoriotex-spaces.tex}
Dimension representing the width of the score (including initial).

\macroname{\textbackslash gre@additionalbottomspace}{}{gregoriotex-spaces.tex}
Dimension representing extra space below the staff needed for low notes.

\macroname{\textbackslash gre@additionaltopspace}{}{gregoriotex-spaces.tex}
Dimension representing extra space above the staff needed for high notes.

\macroname{\textbackslash gre@textlower}{}{gregoriotex-spaces.tex}
Dimension representing the height of the separation between the 0th
line (which is invisible except for notes in the a or b position) and
the bottom of the text.

\macroname{\textbackslash gre@tempwidth}{}{gregoriotex-spaces.tex}
Dimension representing width of some element.

\macroname{\textbackslash gre@textaligncenter}{}{gregoriotex-spaces.tex}
Dimension representing the width from the beginning of the letters in
a syllable to the middle of the middle letters.  Used for lining up
neumes and syllables.

\macroname{\textbackslash gre@additionalleftspace}{}{gregoriotex-spaces.tex}
Dimension representing the additional space that has to be added to
the localleftbox for a big initial (one taking two lines).

\macroname{\textbackslash gre@initialwidth}{}{gregoriotex-spaces.tex}
Dimension representing the width of the initial (and the space after).

\macroname{\textbackslash gre@aboveinitialfirstraise}{}{gregoriotex-spaces.tex}
Dimension representing the space allocated to the first annotation.

\macroname{\textbackslash gre@aboveinitialsecondraise}{}{gregoriotex-spaces.tex}
Dimension representing the space allocated to the second annotation.

\macroname{\textbackslash gre@currentabovelinestextheight}{}{gregoriotex-spaces.tex}
Dimension representing the space allocated above the lines for text.	

\macroname{\textbackslash gre@staffheight}{}{gregoriotex-spaces.tex}
The total height of the staff including the width of the lines and the spaces between them.

\macroname{\textbackslash gre@stafflinediff}{}{gregoriotex-spaces.tex}
Distance representing the difference between the actual size of the staff lines and the ``standard'' size.

\macroname{\textbackslash gre@stafflineheight}{}{gregoriotex-spaces.tex}
The height of the staff line.

\macroname{\textbackslash gre@interstafflinespace}{}{gregoriotex-spaces.tex}
The space between the lines.

\macroname{\textbackslash gre@glyphraisevalue}{}{gregoriotex-spaces.tex}
The value that a particular glyph must be raised to be set in the correct position.

\macroname{\textbackslash gre@addedraisevalue}{}{gregoriotex-spaces.tex}
The additional raise needed for the vertical episema and the puncta.

\macroname{\textbackslash gre@enddifference}{}{gregoriotex-spaces.tex}
Distance from the end of the notes to the end of the text for the previous syllable.  Positive values when notes go further than text, negative in the other case.

\macroname{\textbackslash gre@previousenddifference}{}{gregoriotex-spaces.tex}
Stored value of enddifference prior to the current one.

\macroname{\textbackslash gre@nextbegindifference}{}{gregoriotex-spaces.tex}
The difference between the start of the notes and the start of the text for the next syllable.  Positive when when text begins first, negative in other case.

\macroname{\textbackslash gre@begindifference}{}{gregoriotex-spaces.tex}
The difference between the start of the notes and the start of the text for the current syllable.  Positive when when text begins first, negative in other case.

\macroname{\textbackslash gre@lastglyphwidth}{}{gregoriotex-spaces.tex}
The width of the last glyph.

\macroname{\textbackslash gre@notesaligncenter}{}{gregoriotex-spaces.tex}
Distance from beginning of notes to their point of alignment.

\macroname{\textbackslash gre@tempdim}{}{gregoriotex-spaces.tex}
Temporary dimension used in calculations.

\macroname{\textbackslash gre@tempdimskip}{}{gregoriotex-spaces.tex}
Temporary skip used in calculations.

\macroname{\textbackslash gre@skipone}{}{gregoriotex-spaces.tex}
Temporary skip used in calculations.

\macroname{\textbackslash gre@temp}{}{gregoriotex-spaces.tex}
Temporary skip used in calculations.

\macroname{\textbackslash gre@temp@dimen@one}{}{gregoriotex-spaces.tex}
Temporary dimension used in calculations.

\macroname{\textbackslash gre@temp@skip@one}{}{gregoriotex-spaces.tex}
Temporary skip used in calculations.

\macroname{\textbackslash gre@unit}{}{gregoriotex-spaces.tex}
Temporary dimension used by \verb=\gre@convertto=.

\macroname{\textbackslash gre@base}{}{gregoriotex-spaces.tex}
Temporary dimension used by \verb=\gre@convertto=.

\macroname{\textbackslash gre@maxlen}{}{gregoriotex-spaces.tex}
Distance holding the maximum legal length in TeX.


\subsection{Penalties}
These are the macros that Gregorio\TeX\ uses to manipulate the penalties in order to control line and page breaks within a score without affect the surrounding text.

\macroname{\textbackslash gre@penalty}{\#1}{gregoriotex-signs.tex}
Top level function that aliases \verb=\gre@truepenalty= or \verb=\gre@falsepenalty= according to whether penalties should be in play or not.

\begin{argtable}
  \#1 & integer & The penalty to be applied or gobbled\\
\end{argtable}

\macroname{\textbackslash gre@truepenalty}{\#1}{gregoriotex-signs.tex}
Alias for \verb=\penalty=.

\begin{argtable}
  \#1 & integer & The penalty to be applied\\
\end{argtable}

\macroname{\textbackslash gre@falsepenalty}{\#1}{gregoriotex-signs.tex}
Macro to gobble (suppress) its argument.

\begin{argtable}
  \#1 & integer & The penalty to be gobbled\\
\end{argtable}

\macroname{\textbackslash gre@cancelpenalties}{}{gregoriotex-spaces.tex}
Macro called at the beginning of the score to swap text penalties for score penalties.

\macroname{\textbackslash gre@restorepenalties}{}{gregoriotex-spaces.tex}
Macro called at the end of the score to restore the text penalties.

\macroname{\textbackslash gre@dofinetuning}{}{gregoriotex-spaces.tex}
Macro called at the beginning of the score to swap text penalties for score penalties.

\macroname{\textbackslash gre@endfinetuning}{}{gregoriotex-spaces.tex}
Macro called at the end of the score to restore the text penalties.

\macroname{\textbackslash gre@brokenpenaltysave}{}{gregoriotex-spaces.tex}
A place to save the current value of the broken penalty so that we can change it temporarily and then restore it later.

\macroname{\textbackslash gre@clubpenaltysave}{}{gregoriotex-spaces.tex}
A place to save the current value of the club penalty so that we can change it temporarily and then restore it later.

\macroname{\textbackslash gre@widowpenaltysave}{}{gregoriotex-spaces.tex}
A place to save the current value of the widow penalty so that we can change it temporarily and then restore it later.

\macroname{\textbackslash gre@emergencystretchsave}{}{gregoriotex-spaces.tex}
A place to save the current value of the emergency stretch so that we can change it temporarily and then restore it later.

\macroname{\textbackslash gre@endafterbarpenaltysave}{}{gregoriotex-main.tex}
A place to save the current value of the end after bar penalty so that we can change it temporarily and then restore it later.

\macroname{\textbackslash gre@endafterbaraltpenaltysave}{}{gregoriotex-main.tex}
A place to save the current value of the alternate end after bar penalty so that we can change it temporarily and then restore it later.

\macroname{\textbackslash gre@endofelementpenaltysave}{}{gregoriotex-main.tex}
A place to save the current value of the end of element penalty so that we can change it temporarily and then restore it later.

\macroname{\textbackslash gre@endofsyllablepenaltysave}{}{gregoriotex-main.tex}
A place to save the current value of the end of syllable penalty so that we can change it temporarily and then restore it later.

\macroname{\textbackslash gre@endofwordpenaltysave}{}{gregoriotex-main.tex}
A place to save the current value of the end of word penalty so that we can change it temporarily and then restore it later.

\macroname{\textbackslash gre@exhyphenpenaltysave}{}{gregoriotex-spaces.tex}
A place to save the current value of the ex hyphen penalty so that we can change it temporarily and then restore it later.

\macroname{\textbackslash gre@hyphenpenaltysave}{}{gregoriotex-main.tex \textup{and} gregoriotex-spaces.tex}
A place to save the current value of the hyphen penalty so that we can change it temporarily and then restore it later.

\macroname{\textbackslash gre@nobreakpenaltysave}{}{gregoriotex-main.tex}
A place to save the current value of the no break penalty so that we can change it temporarily and then restore it later.

\macroname{\textbackslash gre@doublehyphendemeritssave}{}{gregoriotex-spaces.tex}
A place to save the current value of the double hyphen demerits so that we can change it temporarily and then restore it later.

\macroname{\textbackslash gre@finalhyphendemeritssave}{}{gregoriotex-spaces.tex}
A place to save the current value of the final hyphen demerits so that we can change it temporarily and then restore it later.

\macroname{\textbackslash gre@loosenessssave}{}{gregoriotex-spaces.tex}
A place to save the current value of the looseness so that we can change it temporarily and then restore it later.

\macroname{\textbackslash gre@tolerancesave}{}{gregoriotex-spaces.tex}
A place to save the current value of the tolerance so that we can change it temporarily and then restore it later.

\macroname{\textbackslash gre@pretolerancesave}{}{gregoriotex-spaces.tex}
A place to save the current value of the pretolerance so that we can change it temporarily and then restore it later.



\section{Special arguments}

These arguments are used by multiple functions and take a lot of space
to describe so we describe them once here and refer to this section
rather than have multiple definitions.

\subsection{Note Alignment Type}\label{notesalign}
\rowcolors{1}{lightgray}{lightgray}
\begin{tabular}{cp{10.5cm plus .5cm}}
  \multicolumn{2}{c}{Integer with the following possibilities:} \\
  \hline
  0 & one-note glyph or more than two notes glyph except porrectus : here we must put the aligncenter in the middle of the first note\\
  1 & two notes glyph (podatus is considered as a one-note glyph) : here we put the aligncenter in the middle of the glyph\\
  2 & porrectus : has a special align center\\
  3 & initio-debilis : same as 1 but the first note is much smaller\\
  4 & case of a glyph starting with a quilisma\\
  5 & case of a glyph starting with an oriscus\\
  6 & case of a punctum inclinatum\\
  7 & case of a stropha\\
  8 & flexus with an ambitus of one\\
  9 & flexus deminutus\\
  10 & virgula\\
  11 & divisio minima, minor and maior\\
  12 & divisio finalis
 \end{tabular}

\subsection{Episemus Special}\label{EpisemusSpecial}
\definecolor{shadecolor}{named}{lightgray}%
\begin{shaded*}%
\vspace{-1.4\baselineskip}
\begin{center}String with the following possibilities:\end{center}
\vspace{-0.8\baselineskip}
\hrule
\vspace{-0.8\baselineskip}
\begin{description}
  \item[FinalPunctum] Last note, which is a standard punctum (works with pes).
  \item[FinalDeminutus] Same, but the last note is a deminutus.
  \item[PenultBeforePunctumWide] The note before the last note, which is a standard punctum.
  \item[PenultBeforeDeminutus] Idem, but the note is the note preceding a deminutus.
  \item[AntepenultBeforePunctum] The note before the note before the last note (for porrectus flexus).
  \item[AntepenultBeforeDeminutus] Idem, but when the two last notes are a deminutus.
  \item[InitialPunctum] The first note, if it is a standard punctum.
  \item[InitioDebilis] The first note, if it is an initio debilis.
  \item[PorrNonAuctusInitialWide] first note of a non-auctus porrectus with a second ambitus of at least two.
  \item[PorrNonAuctusInitialOne] first note of a non-auctus porrectus with a second ambitus of one
  \item[PorrAuctusInitialAny] first note of an auctus porrectus, regardless of second ambitus
  \item[FinalInclinatum] punctum inclinatum as last note
  \item[FinalInclinatumDeminutus] punctum inclinatum deminutus as last note
  \item[FinalStropha] stropha as last note
  \item[FinalQuilisma] quilisma as last note
  \item[FinalOriscus] oriscus as last note
  \item[PenultBeforePunctumOne] second-to-last note, with a second ambitus of one, when last note is a standard punctum (like the second note of ghg)
  \item[FinalUpperPunctum] "upper smaller punctum" as last note (concerning simple podatus, podatus, and torculus resupinus)
  \item[InitialOriscus] oriscus as first note, disconnected from next note
  \item[InitialQuilisma] quilisma as first note, disconnected from next note
  \item[TorcResNonAuctusSecondWideWide] second note of a non-auctus torculus resupinus starting with a punctum, with a first and second ambitus of at least two
  \item[TorcResNonAuctusSecondOneWide] second note of a non-auctus torculus resupinus starting with a punctum, with a first ambitus of one and a second ambitus of at least two
  \item[TorcResDebilisNonAuctusSecondAnyWide] second note of a non-auctus torculus resupinus initio debilis with any first ambitus and a second ambitus of at least two
  \item[FinalLineaPunctum] linea punctum (cavum) as last note
  \item[BarStandard] standard bar
  \item[BarVirgula] virgula
  \item[BarDivisioFinalis] divisio finalis
  \item[TorcResQuilismaNonAuctusSecondWideWide] second note of a non-auctus torculus resupinus starting with a quilisma, with a first and second ambitus of at least two
  \item[TorcResOriscusNonAuctusSecondWideWide] second note of a non-auctus torculus resupinus starting with an oriscus, with a first and second ambitus of at least two
  \item[TorcResQuilismaNonAuctusSecondOneWide] second note of a non-auctus torculus resupinus starting with a quilisma, with a first ambitus of one and and second ambitus of at least two
  \item[TorcResOriscusNonAuctusSecondOneWide] second note of a non-auctus torculus resupinus starting with an oriscus, with a first ambitus of one and and second ambitus of at least two
  \item[TorcResNonAuctusSecondWideOne] second note of a non-auctus torculus resupinus starting with a punctum, with a first ambitus of at least two and a second ambitus of one
  \item[TorcResDebilisNonAuctusSecondAnyOne] second note of a non-auctus torculus resupinus initio debilis with any first ambitus and a second ambitus of one
  \item[TorcResQuilismaNonAuctusSecondWideOne] second note of a non-auctus torculus resupinus starting with a quilisma, with a first ambitus of at least two and a second ambitus of one
  \item[TorcResOriscusNonAuctusSecondWideOne] second note of a non-auctus torculus resupinus starting with an oriscus, with a first ambitus of at least two and a second ambitus of one
  \item[TorcResNonAuctusSecondOneOne] second note of a non-auctus torculus resupinus starting with a punctum, with a first and second ambitus of one
  \item[TorcResQuilismaNonAuctusSecondOneOne] second note of a non-auctus torculus resupinus starting with a quilisma, with a first and second ambitus of one
  \item[TorcResOriscusNonAuctusSecondOneOne] second note of a non-auctus torculus resupinus starting with an oriscus, with a first and second ambitus of one
  \item[TorcResAuctusSecondWideAny] second note of an auctus torculus resupinus starting with a punctum, with a first ambitus of at least two and any second ambitus
  \item[TorcResDebilisAuctusSecondAnyAny] second note of an auctus torculus resupinus initio debilis with any first and second ambitus
  \item[TorcResQuilismaAuctusSecondWideAny] second note of an auctus torculus resupinus starting with a quilisma, with a first ambitus of at least two and any second ambitus
  \item[TorcResOriscusAuctusSecondWideAny] second note of an auctus torculus resupinus starting with an oriscus, with a first ambitus of at least two and any second ambitus
  \item[TorcResAuctusSecondOneAny] second note of an auctus torculus resupinus starting with a punctum, with a first ambitus of one and any second ambitus
  \item[TorcResQuilismaAuctusSecondOneAny] second note of an auctus torculus resupinus starting with a quilisma, with a first ambitus of one and any second ambitus
  \item[TorcResOriscusAuctusSecondOneAny] second note of an auctus torculus resupinus starting with an oriscus, with a first ambitus of one and any second ambitus
  \item[ConnectedPenultBeforePunctumWide] second-to-last note connected to prior note, with a second ambitus of at least two, when last note is a standard punctum (like the second note of \textit{gig})
  \item[ConnectedPenultBeforePunctumOne] second-to-last note connected to prior note, with a second ambitus of one, when last note is a standard punctum (like the second note of \textit{gih})
  \item[InitialConnectedPunctum] standard punctum as first note, connected to next higher note
  \item[InitialConnectedVirga] "virga" as first note, connected to next lower note
  \item[InitialConnectedQuilisma] quilisma as first note, connected to next higher note
  \item[InitialConnectedOriscus] oriscus as first note, connected to next higher note
  \item[FinalConnectedPunctum] punctum as last note, connected to prior higher note
  \item[FinalConnectedAuctus] auctus as last note, connected to prior lower note
  \item[FinalVirgaAuctus] virga aucta as last note
  \item[FinalConnectedVirga] "virga" as last note, connected to prior lower note
  \item[InitialVirga] "virga" as first note, disconnected from next note
\end{description}
\end{shaded*}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "GregorioRef"
%%% End:
